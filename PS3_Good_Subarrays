//All Accepted

#pragma GCC optimize ("Ofast")
#pragma GCC optimize ("unroll-loops")
 
#include <bits/stdc++.h>
using namespace std;
 
int main() {
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
    cout.tie(NULL);
    int t;
    cin >> t;
    while(t--)
    {
        int n;
        cin >> n;
        string s;
        cin >> s;
        vector <long long> v(n),prefix(n+1,0);
        map <int,int> mp,chk;
        for(int i = 0;i<n;i++)
        {
            v[i] = s[i] - 48;
            prefix[i+1] = prefix[i] + v[i];
            prefix[i] = prefix[i] - i;
            mp[prefix[i]] = 0;
        }
        prefix[n] -= n;
        mp[prefix[n]] = 0;
        for(int i = 0;i<n+1;i++)
        {
            mp[prefix[i]]++;
            chk[prefix[i]] = 0;
        }
        long long ans = 0;
        for(int i = 0;i<n+1;i++)
        {
            if(!chk[prefix[i]])
            {
                long long p;
                if(mp[prefix[i]]%2 == 0)
                {
                    p = mp[prefix[i]]/2;
                    p*= (mp[prefix[i]]-1);
                }
                else
                {
                    p = (mp[prefix[i]] - 1)/2;
                    p*= (mp[prefix[i]]);
                }
                chk[prefix[i]] = 1;
                ans += p;
            }
        }
        cout << ans;
        cout << endl;
        
    }
    return 0;
}

